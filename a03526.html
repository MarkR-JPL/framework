<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ReFRACtor: FullPhysics::ConvergenceCheck Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ReFRACtor
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a03526.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="a03523.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">FullPhysics::ConvergenceCheck Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>This class tests for convergence of a Levenberg-Marquardt solver.  
 <a href="a03526.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="a00902_source.html">convergence_check.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for FullPhysics::ConvergenceCheck:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="a03525.png" border="0" usemap="#_full_physics_1_1_convergence_check_inherit__map" alt="Inheritance graph"/></div>
<map name="_full_physics_1_1_convergence_check_inherit__map" id="_full_physics_1_1_convergence_check_inherit__map">
<area shape="rect" id="node4" href="a02582.html" title="This class tests for convergence of a Levenberg&#45;Marquardt solver. " alt="" coords="5,484,215,620"/>
<area shape="rect" id="node5" href="a02614.html" title="This class tests for convergence of a Levenberg&#45;Marquardt solver. " alt="" coords="239,469,456,635"/>
<area shape="rect" id="node2" href="a04618.html" title="{FullPhysics::Printable\l\&lt; ConvergenceCheck \&gt;\n||+ print_to_string()\l}" alt="" coords="148,131,309,223"/>
<area shape="rect" id="node3" href="a04498.html" title="For use with SWIG, it is useful to have a base class that everything can be cast to. " alt="" coords="138,5,319,83"/>
</map>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for FullPhysics::ConvergenceCheck:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="a03524.png" border="0" usemap="#_full_physics_1_1_convergence_check_coll__map" alt="Collaboration graph"/></div>
<map name="_full_physics_1_1_convergence_check_coll__map" id="_full_physics_1_1_convergence_check_coll__map">
<area shape="rect" id="node2" href="a04618.html" title="{FullPhysics::Printable\l\&lt; ConvergenceCheck \&gt;\n||+ print_to_string()\l}" alt="" coords="15,131,177,223"/>
<area shape="rect" id="node3" href="a04498.html" title="For use with SWIG, it is useful to have a base class that everything can be cast to. " alt="" coords="5,5,187,83"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a06ca0daabb2ec5758d3f14d03d3a2566"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a03526.html#a06ca0daabb2ec5758d3f14d03d3a2566">~ConvergenceCheck</a> ()</td></tr>
<tr class="separator:a06ca0daabb2ec5758d3f14d03d3a2566"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37f9f0943ad45de726183a43fd76edad"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a03526.html#a37f9f0943ad45de726183a43fd76edad">convergence_check</a> (const <a class="el" href="a03522.html">FitStatistic</a> &amp;fit_stat_last, <a class="el" href="a03522.html">FitStatistic</a> &amp;fit_stat, bool &amp;has_converged, bool &amp;convergence_failed, double &amp;gamma, bool &amp;step_diverged)=0</td></tr>
<tr class="memdesc:a37f9f0943ad45de726183a43fd76edad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for the convergence of a Solver, or if we have taken a divergent step.  <a href="#a37f9f0943ad45de726183a43fd76edad">More...</a><br /></td></tr>
<tr class="separator:a37f9f0943ad45de726183a43fd76edad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a533a238b649359e257c1e720d1c6a234"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a03526.html#a533a238b649359e257c1e720d1c6a234">evaluate_quality</a> (<a class="el" href="a03522.html">FitStatistic</a> &amp;fit_stat_last, const blitz::Array&lt; double, 1 &gt; &amp;Residual, const blitz::Array&lt; double, 1 &gt; &amp;Residual_cov_diag)=0</td></tr>
<tr class="memdesc:a533a238b649359e257c1e720d1c6a234"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluates the quality of a converged fit from the residuals and expected residual error.  <a href="#a533a238b649359e257c1e720d1c6a234">More...</a><br /></td></tr>
<tr class="separator:a533a238b649359e257c1e720d1c6a234"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea841c3d0ac10a6c563cff935f84c963"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a03526.html#aea841c3d0ac10a6c563cff935f84c963">initialize_check</a> ()</td></tr>
<tr class="memdesc:aea841c3d0ac10a6c563cff935f84c963"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called before the first iteration, in case there is any setup.  <a href="#aea841c3d0ac10a6c563cff935f84c963">More...</a><br /></td></tr>
<tr class="separator:aea841c3d0ac10a6c563cff935f84c963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c79bcdb731f6e778a2960d806e9a2a3"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a03526.html#a6c79bcdb731f6e778a2960d806e9a2a3">print</a> (std::ostream &amp;Os) const</td></tr>
<tr class="memdesc:a6c79bcdb731f6e778a2960d806e9a2a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print description of object.  <a href="#a6c79bcdb731f6e778a2960d806e9a2a3">More...</a><br /></td></tr>
<tr class="separator:a6c79bcdb731f6e778a2960d806e9a2a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa21f558fa22a1f06175a1357c7f5a22"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a04618.html#aaa21f558fa22a1f06175a1357c7f5a22">print_to_string</a> () const</td></tr>
<tr class="memdesc:aaa21f558fa22a1f06175a1357c7f5a22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print to string.  <a href="#aaa21f558fa22a1f06175a1357c7f5a22">More...</a><br /></td></tr>
<tr class="separator:aaa21f558fa22a1f06175a1357c7f5a22"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class tests for convergence of a Levenberg-Marquardt solver. </p>

<p class="definition">Definition at line <a class="el" href="a00902_source.html#l00181">181</a> of file <a class="el" href="a00902_source.html">convergence_check.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a06ca0daabb2ec5758d3f14d03d3a2566"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06ca0daabb2ec5758d3f14d03d3a2566">&#9670;&nbsp;</a></span>~ConvergenceCheck()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual FullPhysics::ConvergenceCheck::~ConvergenceCheck </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00902_source.html#l00183">183</a> of file <a class="el" href="a00902_source.html">convergence_check.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a37f9f0943ad45de726183a43fd76edad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37f9f0943ad45de726183a43fd76edad">&#9670;&nbsp;</a></span>convergence_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void FullPhysics::ConvergenceCheck::convergence_check </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a03522.html">FitStatistic</a> &amp;&#160;</td>
          <td class="paramname"><em>fit_stat_last</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a03522.html">FitStatistic</a> &amp;&#160;</td>
          <td class="paramname"><em>fit_stat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>has_converged</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>convergence_failed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>gamma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>step_diverged</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check for the convergence of a Solver, or if we have taken a divergent step. </p>
<p>We pass in data from both this iteration and the last. If this is the first iteration, then the last values can be any kind of garbage value that is convenient (e.g., an empty Array) - we don't look at the value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fit_stat_last</td><td><a class="el" href="a03522.html" title="This class holds various parameters describing how good of a fit we have. ">FitStatistic</a> from the last iteration. </td></tr>
    <tr><td class="paramname">fit_stat</td><td><a class="el" href="a03522.html" title="This class holds various parameters describing how good of a fit we have. ">FitStatistic</a> from this iteration. If we fail convergence, the class may update fit_stat.outcome with the reason for failing. </td></tr>
    <tr><td class="paramname">has_converged</td><td>On exit, true if we have converged to a solution. </td></tr>
    <tr><td class="paramname">convergence_failed</td><td>On exit, true if we have failed to converge and solver should just give up (e.g., we've exceeded a maximum number of iterations. </td></tr>
    <tr><td class="paramname">gamma</td><td>The Levenberg-Marquardt gamma parameter. On input this is value used in this iteration, on exit this is possibly updated to a new value. </td></tr>
    <tr><td class="paramname">step_diverged</td><td>On exit, this is true if the last iteration took a divergent step. In that case, we also update gamma to its new value. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="a02582.html#aba67a7a87f3a1941dc69065d3fd93285">FullPhysics::ChisqConvergence</a>, and <a class="el" href="a02614.html#a3bbfa6a09e1cc75947d6ec2acabfcc20">FullPhysics::ConnorConvergence</a>.</p>

</div>
</div>
<a id="a533a238b649359e257c1e720d1c6a234"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a533a238b649359e257c1e720d1c6a234">&#9670;&nbsp;</a></span>evaluate_quality()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void FullPhysics::ConvergenceCheck::evaluate_quality </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a03522.html">FitStatistic</a> &amp;&#160;</td>
          <td class="paramname"><em>fit_stat_last</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const blitz::Array&lt; double, 1 &gt; &amp;&#160;</td>
          <td class="paramname"><em>Residual</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const blitz::Array&lt; double, 1 &gt; &amp;&#160;</td>
          <td class="paramname"><em>Residual_cov_diag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Evaluates the quality of a converged fit from the residuals and expected residual error. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fit_stat_last</td><td><a class="el" href="a03522.html" title="This class holds various parameters describing how good of a fit we have. ">FitStatistic</a> from the last iteration. An error should occur if fit_stat.fit_succeeded = False </td></tr>
    <tr><td class="paramname">Residual</td><td>The residual fit from the solver. </td></tr>
    <tr><td class="paramname">Residual_cov_diag</td><td>The expected error for the fit data. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="a02582.html#a91a356c0ea8c08bc7cf1874247584dcc">FullPhysics::ChisqConvergence</a>, and <a class="el" href="a02614.html#ae2d556673aaa31ca26b3941f6ac96fb8">FullPhysics::ConnorConvergence</a>.</p>

</div>
</div>
<a id="aea841c3d0ac10a6c563cff935f84c963"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea841c3d0ac10a6c563cff935f84c963">&#9670;&nbsp;</a></span>initialize_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void FullPhysics::ConvergenceCheck::initialize_check </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called before the first iteration, in case there is any setup. </p>
<p>The default here does nothing, but derived classes can override this to do whatever initialization is needed. </p>

<p class="definition">Definition at line <a class="el" href="a00902_source.html#l00240">240</a> of file <a class="el" href="a00902_source.html">convergence_check.h</a>.</p>

</div>
</div>
<a id="a6c79bcdb731f6e778a2960d806e9a2a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c79bcdb731f6e778a2960d806e9a2a3">&#9670;&nbsp;</a></span>print()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void FullPhysics::ConvergenceCheck::print </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>Os</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Print description of object. </p>

<p>Reimplemented in <a class="el" href="a02582.html#ab074e050753fc4fef3a7d9488d368558">FullPhysics::ChisqConvergence</a>, and <a class="el" href="a02614.html#a0b05f582c8c091d3c50ad473ac409ff2">FullPhysics::ConnorConvergence</a>.</p>

<p class="definition">Definition at line <a class="el" href="a00902_source.html#l00246">246</a> of file <a class="el" href="a00902_source.html">convergence_check.h</a>.</p>

</div>
</div>
<a id="aaa21f558fa22a1f06175a1357c7f5a22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa21f558fa22a1f06175a1357c7f5a22">&#9670;&nbsp;</a></span>print_to_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="a04618.html">FullPhysics::Printable</a>&lt; <a class="el" href="a03526.html">ConvergenceCheck</a>  &gt;::print_to_string </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Print to string. </p>
<p>This is primarily useful for SWIG wrappers to this class, e.g. a to_s method in ruby. </p>

<p class="definition">Definition at line <a class="el" href="a01742_source.html#l00031">31</a> of file <a class="el" href="a01742_source.html">printable.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Interface/<a class="el" href="a00902_source.html">convergence_check.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<hr size="1">
<address style="align: right;"><small>
<center>
Copyright &copy 2017, California Institute of Technology.<br/>
            ALL RIGHTS RESERVED.<br/>
  U.S. Government Sponsorship acknowledged.<br/>
  Generated Fri Aug 24 2018 15:44:12
</center></small></address>
</body>
</html>
